[{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"CC0 1.0 Universal","title":"CC0 1.0 Universal","text":"CREATIVE COMMONS CORPORATION LAW FIRM PROVIDE LEGAL SERVICES. DISTRIBUTION DOCUMENT CREATE ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES INFORMATION “-” BASIS. CREATIVE COMMONS MAKES WARRANTIES REGARDING USE DOCUMENT INFORMATION WORKS PROVIDED HEREUNDER, DISCLAIMS LIABILITY DAMAGES RESULTING USE DOCUMENT INFORMATION WORKS PROVIDED HEREUNDER.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/LICENSE.html","id":"statement-of-purpose","dir":"","previous_headings":"","what":"Statement of Purpose","title":"CC0 1.0 Universal","text":"laws jurisdictions throughout world automatically confer exclusive Copyright Related Rights (defined ) upon creator subsequent owner(s) (, “owner”) original work authorship /database (, “Work”). Certain owners wish permanently relinquish rights Work purpose contributing commons creative, cultural scientific works (“Commons”) public can reliably without fear later claims infringement build upon, modify, incorporate works, reuse redistribute freely possible form whatsoever purposes, including without limitation commercial purposes. owners may contribute Commons promote ideal free culture production creative, cultural scientific works, gain reputation greater distribution Work part use efforts others. /purposes motivations, without expectation additional consideration compensation, person associating CC0 Work (“Affirmer”), extent owner Copyright Related Rights Work, voluntarily elects apply CC0 Work publicly distribute Work terms, knowledge Copyright Related Rights Work meaning intended legal effect CC0 rights. Copyright Related Rights. Work made available CC0 may protected copyright related neighboring rights (“Copyright Related Rights”). Copyright Related Rights include, limited , following: right reproduce, adapt, distribute, perform, display, communicate, translate Work; moral rights retained original author(s) /performer(s); publicity privacy rights pertaining person’s image likeness depicted Work; rights protecting unfair competition regards Work, subject limitations paragraph 4(), ; rights protecting extraction, dissemination, use reuse data Work; database rights (arising Directive 96/9/EC European Parliament Council 11 March 1996 legal protection databases, national implementation thereof, including amended successor version directive); similar, equivalent corresponding rights throughout world based applicable law treaty, national implementations thereof. Waiver. greatest extent permitted , contravention , applicable law, Affirmer hereby overtly, fully, permanently, irrevocably unconditionally waives, abandons, surrenders Affirmer’s Copyright Related Rights associated claims causes action, whether now known unknown (including existing well future claims causes action), Work () territories worldwide, (ii) maximum duration provided applicable law treaty (including future time extensions), (iii) current future medium number copies, (iv) purpose whatsoever, including without limitation commercial, advertising promotional purposes (“Waiver”). Affirmer makes Waiver benefit member public large detriment Affirmer’s heirs successors, fully intending Waiver shall subject revocation, rescission, cancellation, termination, legal equitable action disrupt quiet enjoyment Work public contemplated Affirmer’s express Statement Purpose. Public License Fallback. part Waiver reason judged legally invalid ineffective applicable law, Waiver shall preserved maximum extent permitted taking account Affirmer’s express Statement Purpose. addition, extent Waiver judged Affirmer hereby grants affected person royalty-free, non transferable, non sublicensable, non exclusive, irrevocable unconditional license exercise Affirmer’s Copyright Related Rights Work () territories worldwide, (ii) maximum duration provided applicable law treaty (including future time extensions), (iii) current future medium number copies, (iv) purpose whatsoever, including without limitation commercial, advertising promotional purposes (“License”). License shall deemed effective date CC0 applied Affirmer Work. part License reason judged legally invalid ineffective applicable law, partial invalidity ineffectiveness shall invalidate remainder License, case Affirmer hereby affirms () exercise remaining Copyright Related Rights Work (ii) assert associated claims causes action respect Work, either case contrary Affirmer’s express Statement Purpose. Limitations Disclaimers. trademark patent rights held Affirmer waived, abandoned, surrendered, licensed otherwise affected document. Affirmer offers Work -makes representations warranties kind concerning Work, express, implied, statutory otherwise, including without limitation warranties title, merchantability, fitness particular purpose, non infringement, absence latent defects, accuracy, present absence errors, whether discoverable, greatest extent permissible applicable law. Affirmer disclaims responsibility clearing rights persons may apply Work use thereof, including without limitation person’s Copyright Related Rights Work. , Affirmer disclaims responsibility obtaining necessary consents, permissions rights required use Work. Affirmer understands acknowledges Creative Commons party document duty obligation respect CC0 use Work.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"calsim-summary","dir":"Articles","previous_headings":"","what":"CalSim Summary","title":"CalSim Model Overview Document","text":"CalSim water resources planning model, developed California Department Water Resources (DWR) Mid-Pacific Region U.S. Bureau Reclamation (Reclamation), simulate operations State Water Project (SWP) Central Valley Project (CVP). CalSim 3 newest version model document focus CalSim 3 version highlight differences CalSim 3 prior modeling version CalSim-II (released 2022). Source: Jointly developed DWR Reclamation. Information document pulled CalSim 3 main report Model available GitHub. However high level effort run model independently. (license commercial solver XA needed run WRIMS 2) ` Extensive model documentation can found . DSS CalSim output files easily avaliable online. Temporal Coverage: 1922 - 2015 Spatial Coverage: Covers DWR Reclamation Operated watersheds (see full schematic). 23 28 watersheds representing historical Chinook extent represented CalSim Maintenance: Maintained Reclamation DWR. New modeled scenarios released needed Reclamation DWR efforts. Contact: CVMsupport@water.ca.gov Utilized : Primarily developed conducting planning studies relating operations SWP CVP. Modeling results additionally utilized many efforts including Central Valley Improvement Act Science Integration Team modeling processes (CalSim-II), DWR’s Voluntary Agreements process (CalSim 3), Reorienting Recovery CA Central Valley Salmon Recovery Project.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"calsim-model-summary","dir":"Articles","previous_headings":"","what":"CalSim Model Summary","title":"CalSim Model Overview Document","text":"California Simulation (CalSim) water resources planning model Central Valley Project (CVP) State Water Project (SWP) operations. CalSim simulates operations State Water Project (SWP) Central Valley Project (CVP), along much water resources infrastructure Central Valley California Sacramento-San Joaquin Delta region. models various aspects water management, including: water storage, conveyance, deliveries, hydropower generation, flows Additionally, CalSim simulates interactions components impacts water availability, reliability, overall system performance.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"architecture","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Architecture","title":"CalSim Model Overview Document","text":"following sections describe key model components. diagram simplified version CalSim data inputs contribute mass balance watersheds.Water Resource Integrated Modeling System (WRIM)  Water Resource Integrated Modeling System (WRIM) provides modeling framework software CalSim. WRIMS versatile water resources modeling system designed assess operational alternatives large intricate river basins. incorporates simulation language flexible specification operational criteria, linear programming solver making efficient water allocation decisions, graphics capabilities (WRIM). Simulation language operations criteria Linear programming solver water allocation decisions Graphic capabilities","code":""},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"calsimhydro","dir":"Articles","previous_headings":"CalSim Model Summary > Architecture","what":"CalSimHydro","title":"CalSim Model Overview Document","text":"CalSimHydro CalSim 3.0 Hydrology Preprocessor. CalSimHydro consists following components described CalSimHydro Tool - Web-based interactive tool CalSim 3.0 Hydrology Prepropessor: Rainfall-Runoff Model compute monthly infiltration Soil moisture demand calculator (IDC) estimates surface runoff, deep percolation, water demands natural vegetation cover various crops rice Rice Water Use Model compute water demands, deep percolation, irrigation return flow, runoff precipitation rice fields Refuge Water Use Model simulates ponding operations managed wetlands, Data Aggregation Transfer Module aggregate outputs modules transfer CalSim SV input file.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"system-components","dir":"Articles","previous_headings":"CalSim Model Summary > Architecture","what":"System Components","title":"CalSim Model Overview Document","text":"Watersheds CalSim categorized either Rim Valley Floor watersheds. Rim: foothill mountain watersheds characterized steep slopes, shallow soils, limited aquifer, developed Valley Floor: located Upper watersheds Delta; extensively developed, highly managed, rich agricultural land, urban areas CalSim 3 uses defined Water Budget Areas (WBA), developed help define enhanced spatial resolution CalSim 3. WBAs used : Provide structure simplify organization, explanation, presentation CalSim 3 data, code, results. Define boundary non-district agricultural water users within region aggregated single demand unit CalSim 3. Define boundary scattered water users whose water supplies domestic (industrial) use self-produced, rely groundwater, represented CalSim 3 single demand unit. Define spatial resolution hydrologic input data calculating agricultural demands (.e., precipitation evapotranspiration (ET)). Additionally, refined spatial scale organized around demand units formulated water users within demand unit similar water rights, water contracts, source(s) water, soils, land use, general water delivery irrigation efficiencies. Demand units smallest computational unit generated based following data sources: Water district water agency boundaries service areas obtained Cal-Atlas Geospatial Clearinghouse (formerly California Spatial Information Library), comprises separate GIS layers Federal, State, private water districts. data also available DWR (2022a). County LAFCO reports water purveyors respective counties (LAFCO, 2022).0F County land-use surveys undertaken DWR’s Division Regional Assistance (formerly Division Planning Local Assistance) (DWR, 2022b). County regional integrated water resources plans integrated water management plans. CalSim II documentation (Reclamation, 2007). Reclamation CVP water supply contract renewal supporting environmental documents (Reclamation, 2022). CalSim developed form node-arc network nodes represent specific locations arcs represent flow nodes, full schematic diagram system. following Node types included: storage nodes - represented blue triangle, start “S_” Blue - natural stream channel Gray - man-made canal, drain bypass Green - Return flow split node Approximates diffuse networks drains Gray - streamflow gaging station wastewater treatment plants water treatment plants pump stations Dashed line signifies demand unit limited groundwater supplies Single, solid line signifies demand unit limited surface water supplies Double, solid line signifies demand unit access surface water groundwater supplies Blue-green fill denotes managed wetland demand unit Green fill denotes agricultural demand unit Grey fill denotes urban demand unit Arcs represent averge monthly flows , nodes. Flow direction indicated arrow. different types arcs includes: C (blue): channel - river stream flows C (gray): channel - canal drain flows SP (black dashed) : Spill - spill flood bypass flows D (red) : Diversion - typically demand unit R (green) : Return Flow - typically demand unit (blue) : Inflow - rim watershed inflows SR (blue) : Surface Runoff - rainfall-runoff within valley floor","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"assumptions","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Assumptions","title":"CalSim Model Overview Document","text":"Hydroloic Modeling assumptions: first assumption categorizes foothill mountainous ‘rim’ watersheds surrounding Central Valley relatively undeveloped, minimal changes land use time affecting natural outflows. watersheds typically exhibit complex topography, steep slopes, shallow soils, limited groundwater aquifer systems. Runoff areas predominantly influenced snowfall snowmelt cycle, precipitation quickly returning streams baseflow. Groundwater extensively utilized water supply source upland watersheds. second assumption pertains ‘valley floor’ watersheds, undergone extensive agricultural development include significant urban areas. Human impacts environment strongly influence timing volume runoff areas. Deep percolation precipitation irrigation contributes aquifer recharge, closely connected stream system. Groundwater serves crucial water source agricultural urban purposes, leading significant changes groundwater storage time.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"accessibility","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Accessibility","title":"CalSim Model Overview Document","text":"multiple components accessibility evaluated: documentation model code/software openly available download model parameters results available download user able run model without extensive expertise Documentation: CalSim 3 main report documentation 776 pages though well-organized. documentation provides following sections 3 appendix License: WRIMS 2 copyrighted State California Department Water Resources. licensed Eclipse Public License, Version 1.0. See Eclipse Public License details. However, WRIMS 2 includes commercial solver named XA requires license. Download Links: Code Software: WRIMS 2.0 guides software available download DWR WRIMS site. Inputs Outputs: full CalSim model package available download , however clear documentation review run downloaded model. includes model parameters/inputs clear navigate file structure find specific inputs. Running Model progress: Evaluating accessible running model .","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"update-procedure","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Update procedure","title":"CalSim Model Overview Document","text":"standard update schedule CalSim; rather, model updates follow updates regulations. following summarizes updates made: 2000: DWR created Water Resources Integrated Modeling System (WRIMS) 2002: Reclamation DWR subsequently made two public releases CalSim II, known benchmark studies, May 17, 2002, September 30, 2002 (CalSim III Main Report). 2002 - 2021: Iterative updates CalSim 2 regulatory rulesets. 2022: CalSim 3 produced","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"primary-differences-between-calsimii-and-calsim-3","dir":"Articles","previous_headings":"CalSim Model Summary > Update procedure","what":"Primary differences between CalSimII and CalSim 3","title":"CalSim Model Overview Document","text":"Updates CalSim 3 aim enhance accuracy, comprehensiveness, usability CalSim 3 water resources management California, addressing various aspects hydrology, water demand, groundwater-surface water interactions, model transparency. CalSim 3 objectives described main report. Spatial Resolution Representation: Adoption finer spatial resolution depicting major stream networks, surface water diversions, water agencies Central Valley. Association water users local surface water supply sources /groundwater use. Improved representation mountain foothill watersheds surrounding Central Valley floor, including explicit representation storage regulation diversions within watersheds, improved estimates unimpaired flows based historical gauge data. Simulation major water supply reservoirs. Updated Hydrology Modeling: Implementation unified land-use-based hydrology model Central Valley floor, including explicit representation surface runoff contributing streamflows. Refinement water demands using data collected California Water Plan, local regional planning studies, calibration water use efficiency factors using historical diversion data. Groundwater-Surface Water Interaction: Development spatially discrete groundwater module resolution similar California Central Valley Simulation Model (C2VSim) simulating groundwater heads stream-aquifer interaction. Standardization Documentation: Adoption standardized nomenclature model structure provide greater clarity transparency model. Increased documentation main report associated appendices. Simulation Period Software Enhancements: Extension simulation period water year 2015. Improvement model result presentation comparison scenarios enhancements WRIMS software.","code":""},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"data-inputs","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Data Inputs","title":"CalSim Model Overview Document","text":"Data Inputs CalSim 3 summarized based Chapters 4, 5, 6 main report. Inputs described main report summarized table :","code":""},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"hydraulic-inputs","dir":"Articles","previous_headings":"CalSim Model Summary > Data Inputs > Rim Watershed Modeling Inputs","what":"Hydraulic Inputs","title":"CalSim Model Overview Document","text":"Rim watersheds - modeled using unimpaired runoff, utilize gage data directly available create preprocessed time series unimpaired runoff. time series utilizes following data sources: USGS (specifics USGS data used, access) DWR (specifics DWR data used, access) USACE (specifics USACE data used, access) Reclamation (specifics Reclamation data used, access) Data stored text files part DWR’s “COMP” model (specifics COMP model data used, access) data sources described depth links sources provided CalSim 3 main report. gaps gage data available gage data rim watershed, synthetic timeseries developed using linear interpolation approach (gage data, limited timeseries) S-Curve Method (Percent Deviation Method) scale flow based similar watershed (gage data available time period). See section 5-14 additional information methods producing synthetic timeseries. see method used rim watershed specific gage utilized, refer table Table 5-1: Data Sources Calculation Methods, Sacramento River Hydrologic Region Table 5-5: Data Sources Calculation Methods, San Joaquin River Hydraulic Region main report","code":""},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"hydraulic-inputs-1","dir":"Articles","previous_headings":"CalSim Model Summary > Data Inputs > Valley Floor Watershed Modeling Inputs","what":"Hydraulic Inputs","title":"CalSim Model Overview Document","text":"CalSim simulates Surface Water Groundwater dynamics Valley Floor Watersheds. Inputs preprocessed series models ran prior CalSim 3 including: IDC = Integrated Demand Calculator RRM = Rainfall-Runoff Model RWUM = Rice Water Use Model WWUM = Wetland Water Use Model following timeseries data used directly models: Surface runoff (SR) precipitation Applied water demand rice (AWr) Applied water demand agricultural crops (AWo) Applied water demand permanent, semi-permanent, seasonal wetlands (AWw) Urban demand (UD), combining indoor outdoor components Tailwater (TW) irrigated agricultural land Wastewater (WW) return flows wastewater treatment plants Deep percolation (DP) land-use classes links sources provided CalSim 3 main report.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"land-use","dir":"Articles","previous_headings":"CalSim Model Summary > Data Inputs > Valley Floor Watershed Modeling Inputs","what":"Land Use","title":"CalSim Model Overview Document","text":"Land Use Land Use Surveys Remote Sensing Data Historical Current (Agricultural Land, Urban Land, Managed Wetlands, Native Vegetation) Evaporation Evapotranspiration (?) Valley Surface Runoff","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"delta-regions","dir":"Articles","previous_headings":"CalSim Model Summary > Data Inputs","what":"Delta Regions","title":"CalSim Model Overview Document","text":"Precipitation NCDC Gaged Point Precipitation PRISM Distributed Precipitation Grid Evaporation Evapotranspiration (?)","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"water-demand---monthly","dir":"Articles","previous_headings":"CalSim Model Summary > Data Inputs","what":"Water Demand - Monthly","title":"CalSim Model Overview Document","text":"Demand represented catchment objects divided : agricultural, urban, wetland refuge Agricultural Water Demand Data Sources Water district water agency boundaries service areas obtained Cal-Atlas Geospatial Clearinghouse (formerly California Spatial Information Library), comprises separate GIS layers Federal, State, private water districts. data also available DWR (2022a). County LAFCO reports water purveyors respective counties (LAFCO, 2022) County land-use surveys undertaken DWR’s Division Regional Assistance (formerly Division Planning Local Assistance) (DWR, 2022b). County regional integrated water resources plans integrated water management plans. CalSim II documentation (Reclamation, 2007). Reclamation CVP water supply contract renewal supporting environmental documents (Reclamation, 2022). Urban Water Demand Data Sources Urban Water Management Plans (UWMP) Integrated Regional Water Management Plans (IRWMP) Drinking Water Source Assessments U.S. Environmental Protection Agency (EPA) California Water Plan, Update 2018 Wetland Water Demand Data Sources Report Refuge Water Supply Investigations, Central Valley Hydrologic Basin, California (Reclamation, 1989a) San Joaquin Basin Action Plan/Kesterson Mitigation Plan (Reclamation, 1989b) Central Valley Joint Venture Implementation Plan (USFWS, 2006) Refuge water management plans (Reclamation, 2022a) Refuge water supply environmental documentation (Reclamation, 2022b) Reclamation water supply contract documents Grassland WD, CDFW, USFWS, MOUs USFWS (Reclamation, 2022c) Contracts Water Rights Central Valley Project State Water Project Non-Project Water Users, Sacramento River Region Non-Project Water Users, San Joaquin River Region","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"model-outputs","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Model Outputs","title":"CalSim Model Overview Document","text":"CalSim produces .DSS file model outputs monthly timestep.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"model-validation-procedures","dir":"Articles","previous_headings":"CalSim Model Summary","what":"Model Validation procedures","title":"CalSim Model Overview Document","text":"Ask expert","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"spatial-temporal-coverage","dir":"Articles","previous_headings":"","what":"Spatial & Temporal Coverage","title":"CalSim Model Overview Document","text":"Watershed boundaries developed using CalWater 2.2.1 USGS 12-digit Hydrologic Unit Code (HUC) watersheds. Click download full model network schematic.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"data-use-and-limitations","dir":"Articles","previous_headings":"","what":"Data use and limitations","title":"CalSim Model Overview Document","text":"Valley Wide Analysis - pros, good coverage system, can model different operations cause different flow relatively fine scale. cons, monthly time scale limited use biological modeling, monthly timestep capture fine scale resolution biological organisms experience.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/calsim_template.html","id":"questions","dir":"Articles","previous_headings":"Data use and limitations","what":"Questions","title":"CalSim Model Overview Document","text":"conceptual model anywhere describe CalSim modeling framework model validation procedures? Applied Water demands used ? Talk diagram.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Flow Modeling Approaches","text":"Flow data modeling crucial various applications hydrology, water resource management, environmental studies. cases empirical data stream lacking, several approaches can employed generate flow estimates. document, explore various methods modeling flow data empirical data unavailable.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"approach-1-timeserries-interpretation","dir":"Articles","previous_headings":"Introduction","what":"Approach 1: Timeserries interpretation","title":"Flow Modeling Approaches","text":"Benefit: Quick easy, performs relatively well flow data follows seasonal patterns. Good data fairly complete shorter gaps. Limitation: May miss abnormal extreme flow events, may uncertainty approaches Using timeserries interpolation function good approach relatively good data coverage data gaps. One possible interpolation function forecastML::fill_gaps(). information function, see forecastML documenation.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"example","dir":"Articles","previous_headings":"Introduction > Approach 1: Timeserries interpretation","what":"Example","title":"Flow Modeling Approaches","text":"want study flow temperature correlation ___ system. USGS gage system, missing data _____ window.","code":"# Load necessary libraries library(dataRetrieval) library(forecastML)  # Make API call to USGS to retrieve flow data for the specified site and time period gage_data <- dataRetrieval::readNWISdv(11384000, \"00060\") |>    select(date = Date,           flow_cfs = X_00060_00003) # 'gage_data' is the dataset containing USGS flow data with gaps # Fill gaps in flow data using forecastML::fill_gaps() function filled_data <- forecastML::fill_gaps(data = gage_data,                                      date_col = 1,                                       frequency = \"1 day\")  # Plot original and filled data for comparison gage_data |>    ggplot(aes(x = date, y = flow_cfs)) +    geom_line(color = colors[1]) +    theme_minimal()"},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"approach-2-linear-regression-between-stream-gage-data---filling-a-temporal-data-gap","dir":"Articles","previous_headings":"Introduction","what":"Approach 2: Linear Regression between Stream Gage Data - Filling a temporal data gap","title":"Flow Modeling Approaches","text":"Benefit: Fairly quick straightforward, linear regression typically fairly good job Limitation: Need least gage overlap across different conditions, good coverage across different conditions may loose extreem flow events One approach interpolate flow data one stream using available stream gage data. order need least gage data system trying model data cover variety conditions (water year types). method establishes linear correlation target site sites experience similar hydrological conditions. approach requires identifying comparable sites establishing relationship flow data.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"example-1","dir":"Articles","previous_headings":"Introduction > Approach 2: Linear Regression between Stream Gage Data - Filling a temporal data gap","what":"Example","title":"Flow Modeling Approaches","text":"creating regional model data 4 salmonid bearing streams: Butte Creek, Mill Creek, Deer Creek, Yuba River . interested flow data 2000 - 2024 match monitoring data. Unfortunately, Yuba River, gage data _____. order keeep Yuba dataset. need fill gaps.","code":"## Data used to build models: Butte Creek # Butte Creek is used to build the regression models because the time series is complete and the data are high quality. butte <- cdec_query(station = \"BCK\", dur_code = \"H\", sensor_num = \"25\", start_date = \"2000-01-01\") butte_format <- butte |>      mutate(date = as_date(datetime),            temp_degC = SRJPEdata::fahrenheit_to_celsius(parameter_value)) |>     filter(temp_degC < 40, temp_degC > 0.5) |>     group_by(date) |>      summarise(mean = mean(temp_degC, na.rm = TRUE),               max = max(temp_degC, na.rm = TRUE),               min = min(temp_degC, na.rm = TRUE)) |>      pivot_longer(mean:min, names_to = \"statistic\", values_to = \"value\") |>     mutate(stream = \"butte creek\",            gage_agency = \"CDEC\",            gage_number = \"BCK\",            parameter = \"temperature\")  butte_format_wide <- butte_format |>    ungroup() |>    select(-gage_agency, -gage_number) |>    pivot_wider(id_cols = c(stream, date), names_from = \"statistic\", values_from = \"value\", values_fill = NA)  # Gage Data YR7_daily_temps <- cdec_query(station = \"YR7\", dur_code = \"E\", sensor_num = \"146\", start_date = \"2019-01-01\")  yuba_format <- YR7_daily_temps |>      mutate(date = as_date(datetime),            year = year(datetime)) |>      filter(parameter_value < 40, parameter_value > 0, !is.na(date)) |>      group_by(date) |>      summarise(mean = mean(parameter_value, na.rm = TRUE),              max = max(parameter_value, na.rm = TRUE),              min = min(parameter_value, na.rm = TRUE)) |>    pivot_longer(mean:min, names_to = \"statistic\", values_to = \"value\") |>   mutate(stream = \"yuba river\",          gage_agency = \"CDEC\",          gage_number = \"YR7\",          parameter = \"temperature\") |>    glimpse() ## Rows: 4,953 ## Columns: 7 ## $ date        <date> 2019-09-03, 2019-09-03, 2019-09-03, 2019-09-04, 2019-09-0… ## $ statistic   <chr> \"mean\", \"max\", \"min\", \"mean\", \"max\", \"min\", \"mean\", \"max\",… ## $ value       <dbl> 18.72500, 19.00000, 18.40000, 17.33958, 19.20000, 15.40000… ## $ stream      <chr> \"yuba river\", \"yuba river\", \"yuba river\", \"yuba river\", \"y… ## $ gage_agency <chr> \"CDEC\", \"CDEC\", \"CDEC\", \"CDEC\", \"CDEC\", \"CDEC\", \"CDEC\", \"C… ## $ gage_number <chr> \"YR7\", \"YR7\", \"YR7\", \"YR7\", \"YR7\", \"YR7\", \"YR7\", \"YR7\", \"Y… ## $ parameter   <chr> \"temperature\", \"temperature\", \"temperature\", \"temperature\"… # combine butte and yuba together for regression modeling yuba_format_wide <- yuba_format |>    ungroup() |>    select(-gage_agency, -gage_number) |>    pivot_wider(id_cols = c(stream, date), names_from = \"statistic\", values_from = \"value\", values_fill = NA)  yuba_regression_data_full <- yuba_format_wide |>    ungroup() |>    select(date, mean) |>    rename(yuba_temp_mean = mean) |>    full_join(butte_format_wide |>                select(date, mean) |>                rename(butte_temp_mean = mean)) ## Joining with `by = join_by(date)` # FOR PREDICTIONS identify gaps to predict data yuba_gap_mean <- yuba_regression_data_full |>    filter(is.na(yuba_temp_mean), !is.na(butte_temp_mean)) |>    rename(butte_temp = butte_temp_mean)  # FOR MODEL use data where there are no missing data for either butte or feather for regression modeling yuba_regression_data_mean <- yuba_regression_data_full |>    filter(!is.na(yuba_temp_mean), !is.na(butte_temp_mean)) |>    rename(butte_temp = butte_temp_mean,          temp = yuba_temp_mean)  #### Building Mean Regression # MEAN Regression split <-rsample::initial_split(yuba_regression_data_mean, prop = 0.8) train <- rsample::training(split) test <- rsample::testing(split) yuba_mod_mean <- lm(temp ~ date + butte_temp, data = train) summary(yuba_mod_mean) ##  ## Call: ## lm(formula = temp ~ date + butte_temp, data = train) ##  ## Residuals: ##     Min      1Q  Median      3Q     Max  ## -3.9485 -1.0132  0.0221  1.0565  3.1238  ##  ## Coefficients: ##               Estimate Std. Error t value Pr(>|t|)     ## (Intercept)  2.073e+01  1.547e+00  13.400   <2e-16 *** ## date        -7.672e-04  8.111e-05  -9.459   <2e-16 *** ## butte_temp   5.970e-01  6.773e-03  88.137   <2e-16 *** ## --- ## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 ##  ## Residual standard error: 1.404 on 1315 degrees of freedom ## Multiple R-squared:  0.8586, Adjusted R-squared:  0.8584  ## F-statistic:  3993 on 2 and 1315 DF,  p-value: < 2.2e-16 test_predict <- predict(yuba_mod_mean, test) test_predict_df <- test |>   mutate(predicted = test_predict) # evaluate predictions - MAPE of 10% is not bad mean(abs((   test_predict_df$predicted - test_predict_df$temp )) / test_predict_df$temp) ## [1] 0.08210091 # Predictions yuba_gap_predicted_mean <- predict(yuba_mod_mean, yuba_gap_mean) yuba_mean_predicted <- yuba_gap_mean |>    mutate(value = yuba_gap_predicted_mean,          statistic = \"mean_predicted\") |>    select(date, value, statistic) ggplot(yuba_mean_predicted, aes(x = date, y = value)) +   geom_line() # TODO kinda a weird trend line, update"},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"approach-3-representative-stream-and-scaling","dir":"Articles","previous_headings":"Introduction","what":"Approach 3: Representative Stream and Scaling","title":"Flow Modeling Approaches","text":"Benefit: Limitation: Using representative stream available flow data can also effective approach. selecting stream similar characteristics (e.g., drainage area, land use, climate), can scale flow data estimate flows target stream.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"example-2","dir":"Articles","previous_headings":"Introduction > Approach 3: Representative Stream and Scaling","what":"Example","title":"Flow Modeling Approaches","text":"","code":"# Example R code for scaling"},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"approach-4-utilizing-existing-modeled-flow-data","dir":"Articles","previous_headings":"Introduction","what":"Approach 4: Utilizing Existing Modeled Flow Data","title":"Flow Modeling Approaches","text":"Benefit: CalSim SACWAM already modeled , need repeat process Limitation: Montly flow granualarity may limiting use case Existing modeled flow data sources like Calsim SACWAM can utilized. Typically modeled sources already used approach fill data gaps. models simulate hydrological processes provide flow outputs, can directly used across system. However, modeled datasets available monthly timestep, additional modeling may needed produce finer scale flow data.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/articles/flow_modeling_approaches.html","id":"approach-5-expanding-existing-modeled-flow-data","dir":"Articles","previous_headings":"Introduction","what":"Approach 5: Expanding Existing Modeled Flow Data","title":"Flow Modeling Approaches","text":"Benefit: Limitation: existing modeled flow data available lacks required resolution, can expand provide daily flow values. ?","code":""},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Erin Cain. Author, maintainer.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Cain E (2024). streamFlowExplorer: StreamFlowExplorer data package developed FlowWest Metropolitan Water District explore existing California empirical modeled flow datasets.. R package version 0.0.0.9000.","code":"@Manual{,   title = {streamFlowExplorer: StreamFlowExplorer is a data package developed by FlowWest and Metropolitan Water District to explore existing California empirical and modeled flow datasets.},   author = {Erin Cain},   year = {2024},   note = {R package version 0.0.0.9000}, }"},{"path":[]},{"path":"https://flowwest.github.io/streamFlowExplorer/index.html","id":"what-is-streamflowexplorer","dir":"","previous_headings":"","what":"What is streamFlowExplorer?","title":"StreamFlowExplorer is a data package developed by FlowWest and Metropolitan Water District to explore existing California empirical and modeled flow datasets.","text":"StreamFlowExplorer data package developed FlowWest Metropolitan Water District explore existing California empirical modeled flow datasets. package provides summaries describing following California flow datasets highlighting limitations various use cases. package explores utility flow data use Salmonid population modeling. Empirical: United States Geological Survey (USGS) California Data Exchange Center (CDEC) Modeled Datasets: CalSim SacWam Natural Flow Database","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/index.html","id":"install","dir":"","previous_headings":"","what":"Install","title":"StreamFlowExplorer is a data package developed by FlowWest and Metropolitan Water District to explore existing California empirical and modeled flow datasets.","text":"install streamFlowExplorer data package, please use remotes package download GitHub.","code":"#install.packages(\"remotes\") remotes::install_github(\"flowwest/streamFlowExplorer\")"},{"path":"https://flowwest.github.io/streamFlowExplorer/index.html","id":"flow-data-use-cases","dir":"","previous_headings":"","what":"Flow Data Use Cases","title":"StreamFlowExplorer is a data package developed by FlowWest and Metropolitan Water District to explore existing California empirical and modeled flow datasets.","text":"tree displays series decision points associated pathways provide guidance data type best fits intended use case.  find flow data use, ended brown square additional modeling needed, please refer article Flow Modeling Approaches. following table provides brief overview benefits limitations data type potential use cases. Since review focused flow data ecological analysis table primary focuses , also includes use cases non ecological analysis since datasets primarily developed non ecological purposes.","code":""},{"path":"https://flowwest.github.io/streamFlowExplorer/index.html","id":"modeling-methods-to-fill-data-gaps","dir":"","previous_headings":"","what":"Modeling Methods to Fill Data Gaps","title":"StreamFlowExplorer is a data package developed by FlowWest and Metropolitan Water District to explore existing California empirical and modeled flow datasets.","text":"table diagram recommend describe benefits limitations using different flow data sources different use cases. However, every project unique sometimes additional flow modeling necessary get granularity completeness need. Please see Flow Modeling Approaches article overview approaches examples one.","code":""}]
